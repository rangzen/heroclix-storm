<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HeroClix - Storm</title>
</head>
<body>
<main>
    <div>
        <p>Soudain le ciel gronde...<br> ...et il commence à pleuvoir des météorites !</p>
        <p>Des météorites tombent :</p>
        <ol id="damage-list">
            <li>en [14-L] et inflige 2 clix de dégats !</li>
            <li>en [21-H] sans dégats</li>
        </ol>
        <p>Si un personnage se trouve sur une case où tombe un débris,<br>vous pouvez tenter un jet d'esquive sur <span
                id="esquive">esquive</span> ou plus.</p>
        <div>
            <p>Réussite :</p>
            <ul id="success-list">
                <li>déplacez vous sur une case libre adjacente</li>
            </ul>
            <p>Echec :</p>
            <ul>
                <li>appliquez les dégats</li>
            </ul>
            <p>Echec si aucune case libre :</p>
            <ul>
                <li>appliquez les dégats</li>
            </ul>
        </div>
        <button onClick="window.location.reload();">Refresh</button>
        <p><a href="https://github.com/rangzen/heroclix-storm">Github</a></p>
    </div>
</main>
<script type="text/javascript">
    function randomIntInclusive(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function randomLetter() {
        const alphabet = "ABCDEFGHIJKLMNOP"
        return alphabet[Math.floor(Math.random() * alphabet.length)]
    }

    function storm() {
        const nbMeteor = 10
        const ulm = document.getElementById("damage-list")
        ulm.innerHTML = ""
        for (let i = 0; i < nbMeteor; i++) {
            const nombre = randomIntInclusive(1, 24);
            const lettre = randomLetter();
            const degats = randomIntInclusive(0, 2)
            let d = "en [" + nombre + "-" + lettre + "] "
            if (degats > 0) {
                d += "et inflige " + degats + " clix de dégats !"
            } else {
                d += "sans dégats"
            }
            const lim = document.createElement("li")
            lim.appendChild(document.createTextNode(d))
            ulm.appendChild(lim)
        }

        const esquive = randomIntInclusive(2, 4)
        const e = document.getElementById("esquive");
        e.textContent = esquive

        const defense = randomIntInclusive(0, 3)
        const uld = document.getElementById("success-list");
        const lid = document.createElement("li");
        if (defense > 0) {
            lid.appendChild(document.createTextNode("modifiez la defense du personnage de -" + defense))
        } else {
            lid.appendChild(document.createTextNode("pas besoin de modifier la defense du personnage ce tour-ci"))
        }
        uld.appendChild(lid)
    }

    storm()
</script>
</body>
</html>
